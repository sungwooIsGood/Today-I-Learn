### IAM 이란?

- 아이콘

  ![스크린샷 2025-01-14 오후 3 16 50](https://github.com/user-attachments/assets/538b4132-f0da-495a-95ec-a617d0c08693)
- AWS Identity and Access Management(IAM)를 사용하면 AWS 서비스와 리소스에 대한 액세스를 안전하게 관리할 수 있다.
- AWS 사용자 및 그룹을 만들고 관리하며 AWS 리소스에 대한 액세스를 허용 및 거부할 수 있다.
- **즉, AWS의 보안 및 관리를 담당하는 글로벌 서비스를 담당.**
- 주요 기능
    - AWS 어카운트 관리 및 리소스/사용자/서비스의 권한 제어
        - 임시 권한 부여
        - 서비스 사용을 위한 인증 정보 부여
        - **사용자의 생성, 관리, 계정의 보안**
            - MFA
            - 사용자의 패스워드 정책관리
        - 다른 계정과의 리소스 공유

### IAM 구성

![스크린샷 2025-01-14 오후 3 21 22](https://github.com/user-attachments/assets/0f5b44ec-133a-45e8-9cec-eb0ce9552569)
### Root 사용자

- 계정을 생성할 때 같이 생성되는 사용자
- **계정의 모든 권한을 가지고 있으며 계정 권한을 제한할 방법이 없다.**
    - 탈취 시 복구 매우 어려움 ⇒ MFA 필수
- 자격 증명 부여 가능
    - 단, Root로 최소한의 일을 행하는게 좋음.
- **Root 사용자만 가능한 작업**
    - **AWS 계정 설정 변경(메인 이메일 주소, 계정 이름, 연락처 정보 등)**
    - **요금 관련 설정(IAM 유저에게 위임 가능)**
    - **AWS Support Plan (지원 플랜) 구독, 변경, 취소**
    - **AWS 계정 삭제**

### IAM 사용자

- IAM을 통해 생성한 사용자
- **생성 시 권한이 따로 부여되어 있지 않으며 정책이나 그룹을 통해 권한을 부여 받아야지만 활동이 가능**
- 자격증명 부여 가능(선택)
- 콘솔 로그인 가능(선택)
- 사람뿐 아닌 어플리케이션과 같이 다른 주체도 대표 가능
    - ex) 어플리케이션이 AWS 서비스를 사용하기 위해 IAM 사용자의 자격증명을 보관 후 사용

### 그룹

- IAM 사용자의 집합
- 그룹에 정책을 부여하여 그룹에 속한 모든 사용자에게 해당 정책에 따른 권한 부여가 가능

### 역할(권한, Role)

- AWS의 권한의 집합
- 역할에 맞는 다양한 권한의 집합을 만들고 IAM 사용자, AWS 서비스, 어플리케이션 등 부여받아 활동
- 아무 권한이 없는 IAM 사용자에게 하나씩 권한을 주어 역할을 수행하게 한다로 이해하면 좋다.
    - IAM 사용자에게 경영지원팀의 Role를 주면 계정 요금 조회가 가능한 사용자가 된다.

### 정책(Policy)

- **사용자와 그룹, 역할이 무엇을 할 수 있는지 알려주는 ‘문서’**
- JSON 형식으로 정의되어 있음
- 그룹, 역할, 유저 등에 부여되어 각 주체가 행동 가능한 권한을 정의하여 준다.
- 구성
    - Resource: 어떤 AWS 리소스에 대해
    - Action: 어떤 행동을
    - Effect: 허용/거부
    - Condition: 정책이 적용되는 조건(IP주소, 시간, 태그 등)
        - ex)

      ![스크린샷 2025-01-14 오후 3 48 46](https://github.com/user-attachments/assets/b5bf59b5-40fa-4c25-9525-29df082fdab8)
        - action: s3서비스의 버킷들을 나열
        - effect: 허용
        - resource: arn에 해당하는 리소스에 대해
        - condition: 해당 시간 동안에 접근이 가능
---
## AWS 사용과 인증

### AWS 이용 방법

- **AWS 웹 콘솔**
    - 웹 기반의 콘솔에 로그인하여 AWS를 사용
    - 콘솔 액세스 자격 증명을 사용하여 인증

      ![스크린샷 2025-01-14 오후 4.00.05.png](https://prod-files-secure.s3.us-west-2.amazonaws.com/c4208ea1-f20c-48bd-b05a-8f485cb16b9b/c1473c25-6ec1-4d38-831e-831e89b3f054/%E1%84%89%E1%85%B3%E1%84%8F%E1%85%B3%E1%84%85%E1%85%B5%E1%86%AB%E1%84%89%E1%85%A3%E1%86%BA_2025-01-14_%E1%84%8B%E1%85%A9%E1%84%92%E1%85%AE_4.00.05.png)

- 프로그래밍 액세스 방식
    - Command Line Interface(CLI): 명령어 기반 AWS 서비스 관리

      ![스크린샷 2025-01-14 오후 4.00.27.png](https://prod-files-secure.s3.us-west-2.amazonaws.com/c4208ea1-f20c-48bd-b05a-8f485cb16b9b/4d07a7ac-ec5f-47d9-929e-15d09fe96933/%E1%84%89%E1%85%B3%E1%84%8F%E1%85%B3%E1%84%85%E1%85%B5%E1%86%AB%E1%84%89%E1%85%A3%E1%86%BA_2025-01-14_%E1%84%8B%E1%85%A9%E1%84%92%E1%85%AE_4.00.27.png)

    - Software Development Kit(SDK): 다양한 프로그래밍 언어로 만들어진 AWS 서비스를 관리하는 패키지
        - 각각에 맞는 프로그래밍 언어에 맞는 SDK를 사용해 개발에 활용
    - 프로그램 방식 액세스 자격증명을 사용하여 인증

### 콘솔 액세스 자격 증명

- 콘솔 로그인을 위해 필요
    - Root Email/Password: 루트 사용자 로그인을 위해 사용
    - IAM 사용자 이름/Password: IAM 사용자가 로그인 하기 위해 사용
    - 추가적인 MFA: 다른 자격 증명에 보안을 강화하기 위한 임시 비밀번호

### 프로그램 방식 액세스 자격 증명

- AWS의 CLI혹은 SDK를 사용할 때 필요한 자격 증명
- Access Key 구성
    - Access Key ID: 유저 이름에 해당하는 키, 일반적으로 공개되어도 무방(아이디)
    - Secret Access Key: 패스워드에 해당하는 키, 공개되면 안된다.
- **하나의 IAM 사용자 당 2개의 Acces Key Pair 발급 가능**
    - 가급적 하나로 사용 권장
- 활성화/비활성화 가능하다.
- **Secret Access Key의 경우 발급 시점 이외에 다시 확인 불가능, 꼭 잘 저장해두어야 함.**
- 생성한 IAM사용자의 권한을 행사 가능.

### 프로그램 방식 액세스 자격 증명 활용

- IAM 사용자를 서버/프로그램 별로 생성하여 Access Key를 전달하여 CLI/SDK 사용
    - AWS CLI의 경우 **서버의 별도 파일에 자격 증명을 저장하여 인증**
    - AWS SDK의 경우 **별도 파일에 자격 증명을 저장하거나 런타임에 자격증명을 명시해서 인증**
- 프로파일
    - 자격 증명 단위로 서로 다른 자격 증명에 이름을 부여해서 필요할 때마다 스위칭 가능